@import "tailwindcss";
@import "../styles/keyboard-focus.css";

:root {
  /* Premium Figma-inspired palette - clean, sophisticated, modern */
  
  --background: 0 0% 99%;           /* Almost white - ultra clean */
  --foreground: 222 47% 11%;        /* Deep navy - premium readability */
  --card: 0 0% 100%;                /* Pure white cards - pristine */
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  
  /* Primary: Vibrant orange - appetite stimulating, energetic */
  --primary: 14 90% 53%;            /* Bright coral-orange #f97316 */
  --primary-foreground: 0 0% 100%;
  
  /* Secondary: Ultra subtle - Figma-style neutrals */
  --secondary: 210 20% 98%;         /* Nearly white gray */
  --secondary-foreground: 222 47% 11%;
  --muted: 220 14% 96%;             /* Subtle cool gray */
  --muted-foreground: 220 9% 46%;   /* Medium gray - Figma text */
  
  /* Accent: Premium gold - refined, appetizing */
  --accent: 45 93% 58%;             /* Refined golden */
  --accent-foreground: 222 47% 11%;
  
  --destructive: 0 84% 60%;         /* Vibrant red */
  --destructive-foreground: 0 0% 100%;
  
  /* Borders - ultra subtle Figma-style */
  --border: 220 13% 91%;
  --input: 220 13% 91%;
  --ring: 14 90% 53%;
  --radius: 1rem;                   /* Increased for premium feel */
  
  /* Additional semantic colors */
  --success: 142 76% 45%;           /* Fresh green for success */
  --warning: 38 92% 50%;            /* Warm amber for warnings */
  --info: 211 96% 48%;              /* Bright blue for info */
}

/* Dark mode - premium Figma-style dark theme */
.dark {
  --background: 222 47% 8%;         /* Deeper dark - more premium */
  --foreground: 210 20% 98%;        /* Crisp white text */
  --card: 222 47% 11%;              /* Elevated surface */
  --card-foreground: 210 20% 98%;
  --popover: 222 47% 11%;
  --popover-foreground: 210 20% 98%;
  
  /* Primary: Vibrant orange - pops beautifully in dark */
  --primary: 14 90% 58%;
  --primary-foreground: 0 0% 100%;
  
  --secondary: 222 47% 15%;         /* Subtle elevation */
  --secondary-foreground: 210 20% 98%;
  --muted: 217 33% 16%;             /* Figma-style muted surface */
  --muted-foreground: 215 20% 65%;
  --accent: 45 93% 60%;             /* Bright refined gold */
  --accent-foreground: 222 47% 8%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --border: 217 33% 18%;            /* Subtle borders */
  --input: 217 33% 18%;
  --ring: 14 90% 58%;
}

/* ===== Brand color themes (override primary/accent/ring) ===== */
/* Default (Moringa) uses :root values; other themes override below */

.theme-moringa {
  --primary: 14 90% 53%;
  --accent: 43 96% 56%;
  --ring: 14 90% 53%;
}

.theme-moringa.dark {
  --primary: 14 90% 58%;
  --accent: 43 96% 65%;
  --ring: 14 90% 58%;
}

.theme-emerald {
  /* Primary emerald and fresh green accents */
  --primary: 160 84% 39%; /* #10b981 */
  --accent: 142 71% 45%;  /* #22c55e */
  --ring: 160 84% 39%;
}

.theme-emerald.dark {
  --primary: 160 84% 45%;
  --accent: 142 71% 50%;
  --ring: 160 84% 45%;
}

.theme-rose {
  --primary: 346 77% 55%; /* #f43f5e */
  --accent: 0 84% 60%;    /* #ef4444 */
  --ring: 346 77% 55%;
}

.theme-rose.dark {
  --primary: 346 77% 60%;
  --accent: 0 84% 65%;
  --ring: 346 77% 60%;
}

.theme-violet {
  --primary: 258 90% 66%; /* #8b5cf6 */
  --accent: 262 83% 58%;  /* #7c3aed */
  --ring: 258 90% 66%;
}

.theme-violet.dark {
  --primary: 258 90% 70%;
  --accent: 262 83% 65%;
  --ring: 258 90% 70%;
}

.theme-sky {
  --primary: 199 95% 50%; /* #0ea5e9 */
  --accent: 201 94% 46%;  /* #0284c7 */
  --ring: 199 95% 50%;
}

.theme-sky.dark {
  --primary: 199 95% 55%;
  --accent: 201 94% 52%;
  --ring: 199 95% 55%;
}

.theme-amber {
  --primary: 45 93% 47%;  /* #f59e0b */
  --accent: 43 96% 56%;   /* #fbbf24 */
  --ring: 45 93% 47%;
}

.theme-amber.dark {
  --primary: 45 93% 55%;
  --accent: 43 96% 62%;
  --ring: 45 93% 55%;
}

@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --background: 222 47% 11%;
    --foreground: 210 20% 98%;
    --card: 222 47% 14%;
    --card-foreground: 210 20% 98%;
    --popover: 222 47% 11%;
    --popover-foreground: 210 20% 98%;
    --primary: 14 90% 58%;
    --primary-foreground: 0 0% 100%;
    --secondary: 222 47% 18%;
    --secondary-foreground: 210 20% 98%;
    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;
    --accent: 43 96% 65%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 217 33% 22%;
    --input: 217 33% 22%;
    --ring: 14 90% 58%;
  }
}

* {
  border-color: hsl(var(--border));
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-feature-settings: 'cv11', 'ss01';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: -0.011em; /* Figma-style tighter tracking */
}

/* Premium Figma-style card elevation */
.card-premium {
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border) / 0.5);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06), 0 4px 12px rgba(0, 0, 0, 0.04);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.card-premium::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, hsl(var(--primary) / 0.2), transparent);
  opacity: 0;
  transition: opacity 0.4s ease;
}

.card-premium:hover {
  border-color: hsl(var(--primary) / 0.2);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), 0 16px 48px rgba(0, 0, 0, 0.08);
  transform: translateY(-4px);
}

.card-premium:hover::before {
  opacity: 1;
}

/* Hero gradient background */
.hero-gradient {
  background: linear-gradient(135deg, hsl(var(--primary) / 0.1) 0%, hsl(var(--accent) / 0.05) 100%);
  position: relative;
}

.hero-gradient::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 20% 50%, hsl(var(--primary) / 0.15) 0%, transparent 50%);
  pointer-events: none;
}

/* Glassmorphism effect */
.glass {
  background: hsl(var(--card) / 0.8);
  backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid hsl(var(--border) / 0.5);
}

/* Premium button styles */
button, .btn {
  font-weight: 600;
  letter-spacing: -0.011em;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

button:active:not(:disabled), .btn:active:not(:disabled) {
  transform: scale(0.98);
}

/* Premium input styles */
input, textarea, select {
  transition: all 0.2s ease;
}

input:focus, textarea:focus, select:focus {
  border-color: hsl(var(--primary) / 0.5);
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
}

/* ===== Utility shortcuts for CSS variable-driven colors ===== */
.text-primary { color: hsl(var(--primary)); }
.bg-primary { background-color: hsl(var(--primary)); }
.bg-primary-soft { background-color: hsl(var(--primary) / 0.12); }
.border-primary { border-color: hsl(var(--primary)); }

/* Semantic status colors */
.text-success { color: hsl(var(--success)); }
.bg-success { background-color: hsl(var(--success)); }
.bg-success-soft { background-color: hsl(var(--success) / 0.12); }

.text-warning { color: hsl(var(--warning)); }
.bg-warning { background-color: hsl(var(--warning)); }
.bg-warning-soft { background-color: hsl(var(--warning) / 0.12); }

.text-destructive { color: hsl(var(--destructive)); }
.bg-destructive { background-color: hsl(var(--destructive)); }
.bg-destructive-soft { background-color: hsl(var(--destructive) / 0.12); }

.text-info { color: hsl(var(--info)); }
.bg-info { background-color: hsl(var(--info)); }
.bg-info-soft { background-color: hsl(var(--info) / 0.12); }

/* ===== Color Blind Friendly Mode ===== */
html.color-blind {
  /* Use color pairings commonly distinguishable: blue/orange */
  --primary: 208 80% 45%; /* #1d4ed8-ish (blue) */
  --accent: 28 90% 55%;   /* #f59e0b-ish (orange) */
  --success: 192 91% 36%; /* teal (more distinguishable than green) */
  --warning: 28 90% 55%;  /* align with accent/orange */
  --destructive: 0 84% 60%;
  --ring: 208 80% 45%;
}

/* Add extra cues beyond color only when color-blind mode is on */
html.color-blind a,
html.color-blind button.link,
html.color-blind .is-link {
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* Optional: dashed outlines for status badges to reinforce meaning */
html.color-blind .badge-success { outline: 2px dashed hsl(var(--success)); outline-offset: 2px; }
html.color-blind .badge-warning { outline: 2px dashed hsl(var(--warning)); outline-offset: 2px; }
html.color-blind .badge-danger { outline: 2px dashed hsl(var(--destructive)); outline-offset: 2px; }

/* Utilities to consume CSS variables easily - Tailwind will use these through config */

/* Form controls improved readability */
input, textarea, select {
  caret-color: hsl(var(--foreground));
}

input::placeholder, textarea::placeholder {
  color: hsl(var(--muted-foreground));
}

/* Base theming for native selects and options (ensures visibility in dark/light) */
select {
  background-color: hsl(var(--card));
  color: hsl(var(--foreground));
  border: 1px solid hsl(var(--input));
  border-radius: var(--radius);
}
select:focus {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}
option {
  background-color: hsl(var(--card));
  color: hsl(var(--foreground));
}

/* Improve WebKit autofill contrast */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus {
  -webkit-text-fill-color: hsl(var(--foreground));
  transition: background-color 5000s ease-in-out 0s;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.animate-fadeIn {
  animation: fadeIn 0.2s ease-out;
}

.animate-slideUp {
  animation: slideUp 0.3s ease-out;
}

.animate-scaleIn {
  animation: scaleIn 0.2s ease-out;
}

.animate-slideIn {
  animation: slideIn 0.3s ease-out;
}

/* Simple shimmer animation utility for gradient overlays */
.animate-shimmer {
  background-size: 200% 100% !important;
  animation: shimmer 1.2s linear infinite !important;
}

/* Smooth hover transitions */
.transition-all-smooth {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Skeleton loading shimmer effect */
.skeleton {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 25%,
    hsl(var(--muted) / 0.8) 50%,
    hsl(var(--muted)) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Hide scrollbar but keep scrolling */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}

/* Toast notification styling for proper theme support */
.toast-notification {
  background: hsl(var(--card)) !important;
  color: hsl(var(--card-foreground)) !important;
  border-color: hsl(var(--border)) !important;
}

/* Line clamp */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ===== Accessibility Features ===== */

/* Font Size Options */
html.font-small {
  font-size: 14px;
}

html.font-normal {
  font-size: 16px;
}

html.font-large {
  font-size: 18px;
}

html.font-extra-large {
  font-size: 20px;
}

/* High Contrast Mode */
html.high-contrast {
  --foreground: 0 0% 5%;
  --background: 0 0% 100%;
  --border: 0 0% 20%;
  --primary: 145 45% 40%;
  --primary-foreground: 0 0% 100%;
}

html.high-contrast.dark {
  --foreground: 0 0% 98%;
  --background: 0 0% 8%;
  --border: 0 0% 80%;
  --primary: 145 40% 55%;
  --primary-foreground: 0 0% 5%;
}

html.high-contrast * {
  border-width: max(1px, 0.125rem) !important;
}

html.high-contrast button,
html.high-contrast a,
html.high-contrast input,
html.high-contrast select,
html.high-contrast textarea {
  outline: 2px solid transparent;
  outline-offset: 2px;
}

html.high-contrast button:focus,
html.high-contrast a:focus,
html.high-contrast input:focus,
html.high-contrast select:focus,
html.high-contrast textarea:focus {
  outline: 3px solid hsl(var(--primary));
  outline-offset: 2px;
}

/* Reduced Motion */
html.reduce-motion *,
html.reduce-motion *::before,
html.reduce-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Focus visible styles for keyboard navigation */
*:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}

/* Improve button focus in dark mode */
.dark button:focus-visible,
.dark a:focus-visible {
  outline-color: hsl(var(--primary));
}

/* Mobile Responsive Utilities */
@media (max-width: 640px) {
  /* Improve touch targets */
  button, a, input, select, textarea {
    min-height: 44px;
  }

  /* Better spacing on mobile */
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* Improve table readability */
  table {
    font-size: 0.875rem;
  }

  /* Stack form inputs */
  .form-grid {
    grid-template-columns: 1fr !important;
  }

  /* Improve modal sizing */
  .modal-content {
    max-height: 90vh;
    margin: 1rem;
  }

  /* Better card spacing */
  .card-grid {
    grid-template-columns: 1fr !important;
    gap: 1rem;
  }
}

/* Tablet optimizations */
@media (min-width: 641px) and (max-width: 1024px) {
  .card-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Prevent zoom on input focus (iOS) */
@supports (-webkit-touch-callout: none) {
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="number"],
  input[type="password"],
  textarea,
  select {
    font-size: 16px;
  }
}

/* ===== Enhanced Accessibility Features (WCAG 2.1 AA Compliance) ===== */

/* Screen Reader Optimizations */
html.screen-reader-optimized {
  /* More verbose ARIA live regions */
  --sr-verbosity: polite;
}

html.screen-reader-optimized [role="status"],
html.screen-reader-optimized [role="alert"] {
  position: relative;
}

/* Enhanced Keyboard Navigation */
html.keyboard-navigation *:focus {
  outline: 3px solid hsl(var(--primary)) !important;
  outline-offset: 3px !important;
  box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
}

html.keyboard-navigation a:focus,
html.keyboard-navigation button:focus {
  background-color: hsl(var(--primary) / 0.05);
}

/* Enhanced Focus Indicators (WCAG 2.4.7) */
html.enhanced-focus *:focus-visible {
  outline: 4px solid hsl(var(--primary)) !important;
  outline-offset: 4px !important;
  box-shadow: 0 0 0 6px hsl(var(--primary) / 0.15),
              0 0 0 2px hsl(var(--card));
  border-radius: 4px;
}

html.enhanced-focus button:focus-visible,
html.enhanced-focus a:focus-visible {
  transform: scale(1.02);
  transition: transform 0.1s ease;
}

/* Readable Font (Dyslexia-Friendly) */
html.readable-font,
html.readable-font * {
  font-family: 'Arial', 'Helvetica', sans-serif !important;
  font-weight: 400;
  letter-spacing: 0.03em;
}

html.readable-font h1,
html.readable-font h2,
html.readable-font h3,
html.readable-font h4,
html.readable-font h5,
html.readable-font h6 {
  font-weight: 600;
  letter-spacing: 0.02em;
}

/* Enhanced Text Spacing (WCAG 1.4.12) */
html.enhanced-spacing * {
  line-height: 1.8 !important;
  letter-spacing: 0.12em !important;
  word-spacing: 0.16em !important;
}

html.enhanced-spacing p {
  margin-bottom: 2em !important;
}

html.enhanced-spacing h1,
html.enhanced-spacing h2,
html.enhanced-spacing h3,
html.enhanced-spacing h4,
html.enhanced-spacing h5,
html.enhanced-spacing h6 {
  margin-bottom: 1em !important;
  margin-top: 1.5em !important;
}

/* Link Underlines (Always Visible) */
html.underline-links a {
  text-decoration: underline !important;
  text-decoration-thickness: 2px !important;
  text-underline-offset: 3px !important;
}

html.underline-links a:hover {
  text-decoration-thickness: 3px !important;
  text-decoration-color: hsl(var(--primary)) !important;
}

html.underline-links a:focus {
  text-decoration-thickness: 3px !important;
  text-decoration-style: double !important;
}

/* Color Blind Friendly Mode Enhancements */
html.color-blind {
  /* Use patterns and shapes in addition to colors */
  --success: 220 76% 40%;     /* Blue instead of green */
  --warning: 38 92% 50%;      /* Keep orange */
  --destructive: 0 84% 40%;   /* Darker red */
  --info: 211 96% 48%;        /* Bright blue */
}

html.color-blind .bg-success,
html.color-blind [class*="bg-green"] {
  background-color: hsl(var(--success)) !important;
}

html.color-blind .text-success,
html.color-blind [class*="text-green"] {
  color: hsl(var(--success)) !important;
}

/* Add visual patterns for color-blind users */
html.color-blind .badge-success::before,
html.color-blind .alert-success::before {
  content: "✓ ";
  font-weight: bold;
}

html.color-blind .badge-error::before,
html.color-blind .alert-error::before {
  content: "✗ ";
  font-weight: bold;
}

html.color-blind .badge-warning::before,
html.color-blind .alert-warning::before {
  content: "⚠ ";
  font-weight: bold;
}

/* High Contrast Mode Enhancements */
html.high-contrast {
  --border: 0 0% 0%;
  --input: 0 0% 0%;
}

html.high-contrast.dark {
  --border: 0 0% 100%;
  --input: 0 0% 100%;
}

html.high-contrast * {
  border-width: 2px !important;
}

html.high-contrast img {
  filter: contrast(1.2);
}

/* Skip Links Enhancement */
.skip-link {
  position: absolute;
  top: -100px;
  left: 0;
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  padding: 0.75rem 1.5rem;
  text-decoration: none;
  font-weight: bold;
  z-index: 9999;
  border-radius: 0 0 0.5rem 0;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* Ensure all fonts use font-display: swap for performance */
* {
  font-display: swap;
}

/* Prevent text from becoming invisible (WCAG 1.4.3) */
::selection {
  background-color: hsl(var(--primary) / 0.3);
  color: hsl(var(--foreground));
}

/* Touch Target Size (WCAG 2.5.5 - Level AAA) */
@media (pointer: coarse) {
  button,
  a,
  input[type="button"],
  input[type="submit"],
  input[type="checkbox"],
  input[type="radio"],
  select {
    min-height: 44px;
    min-width: 44px;
    padding: 12px;
  }
}

/* Ensure sufficient spacing between interactive elements */
html.enhanced-spacing button + button,
html.enhanced-spacing a + a {
  margin-left: 1rem !important;
}

/* Print Styles (Accessibility for printed content) */
@media print {
  * {
    background: white !important;
    color: black !important;
  }
  
  a[href]::after {
    content: " (" attr(href) ")";
  }
  
  /* Hide bottom nav when printing */
  nav[aria-label="Mobile bottom navigation"] {
    display: none !important;
  }
}

/* Mobile Bottom Navigation Spacing */
@media (max-width: 768px) {
  /* Add padding to body to account for bottom nav */
  body {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  
  /* Add safe area for bottom nav - prevents content from being hidden */
  main,
  .min-h-screen {
    padding-bottom: calc(4rem + env(safe-area-inset-bottom, 0px)) !important;
  }
}

/* Safe area support for notched devices */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}
